{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\scr\\\\OneDrive\\\\Desktop\\\\new\\\\frontend\\\\src\\\\components\\\\OptionChain.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { Box, Typography, CircularProgress, Chip, Switch, FormControlLabel, Button } from '@mui/material';\nimport { AutoSizer, List } from 'react-virtualized';\nimport { connectToWebSocket, subscribeToTokens, unsubscribeFromTokens, disconnect } from '../services/websocketService';\nimport './OptionChain.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst OptionChain = ({\n  darkMode,\n  toggleDarkMode\n}) => {\n  _s();\n  const [optionChainData, setOptionChainData] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [isConnected, setIsConnected] = useState(false);\n  const [reconnecting, setReconnecting] = useState(false);\n  const [priceUpdates, setPriceUpdates] = useState({});\n  const [subscribedTokens, setSubscribedTokens] = useState(['UNDERLYING']);\n  const handleInitialData = useCallback(data => {\n    console.log('Received initial option chain data', data);\n    setOptionChainData(data);\n    setIsLoading(false);\n  }, []);\n\n  // Handle individual price updates from WebSocket\n  const handlePriceUpdate = useCallback(updates => {\n    if (!updates) return;\n    setPriceUpdates(prev => {\n      const newUpdates = {\n        ...prev\n      };\n      Object.entries(updates).forEach(([token, update]) => {\n        newUpdates[token] = {\n          ...update,\n          updatedAt: Date.now()\n        };\n      });\n      return newUpdates;\n    });\n  }, []);\n  const handleConnectionStatus = useCallback(status => {\n    setIsConnected(status);\n    if (status) {\n      setReconnecting(false);\n    }\n  }, []);\n  const handleReconnecting = useCallback((attempt, maxAttempts) => {\n    console.log(`Reconnecting ${attempt}/${maxAttempts}`);\n    setReconnecting(true);\n  }, []);\n\n  // Subscribe to a specific option\n  const handleSubscribe = useCallback(token => {\n    console.log('Subscribing to token:', token);\n    subscribeToTokens([token]);\n    setSubscribedTokens(prev => [...prev, token]);\n  }, []);\n\n  // Unsubscribe from a specific option\n  const handleUnsubscribe = useCallback(token => {\n    console.log('Unsubscribing from token:', token);\n    unsubscribeFromTokens([token]);\n    setSubscribedTokens(prev => prev.filter(t => t !== token));\n  }, []);\n  useEffect(() => {\n    let mounted = true;\n    setIsLoading(true);\n\n    // Connect to WebSocket\n    connectToWebSocket({\n      onInitialData: data => {\n        if (mounted) {\n          console.log('Option Chain: Received initial data', data);\n          handleInitialData(data);\n          // Automatically subscribe to underlying and some options for demo\n          const defaultTokens = ['UNDERLYING'];\n          // Add some strikes around the current price\n          if (data && data.strikes && data.strikes.length > 0) {\n            const midIndex = Math.floor(data.strikes.length / 2);\n            for (let i = Math.max(0, midIndex - 1); i < Math.min(data.strikes.length, midIndex + 2); i++) {\n              defaultTokens.push(data.strikes[i].call.token);\n              defaultTokens.push(data.strikes[i].put.token);\n            }\n          }\n          // Subscribe to these tokens\n          subscribeToTokens(defaultTokens);\n          setSubscribedTokens(defaultTokens);\n        }\n      },\n      onPriceUpdate: data => {\n        if (mounted) {\n          handlePriceUpdate(data);\n        }\n      },\n      onConnectionStatus: status => {\n        if (mounted) handleConnectionStatus(status);\n      },\n      onReconnecting: (attempt, maxAttempts) => {\n        if (mounted) handleReconnecting(attempt, maxAttempts);\n      },\n      onError: error => {\n        console.error('Option Chain: WebSocket error:', error);\n        if (mounted) {\n          setError(`Connection error: ${error.message || error}`);\n          setIsLoading(false);\n        }\n      }\n    });\n    return () => {\n      mounted = false;\n    };\n  }, [handleInitialData, handlePriceUpdate, handleConnectionStatus, handleReconnecting]);\n\n  // Handle clean unsubscribe on unmount\n  useEffect(() => {\n    return () => {\n      if (subscribedTokens.length > 0) {\n        console.log('Unsubscribing from all tokens on unmount');\n        unsubscribeFromTokens(subscribedTokens);\n      }\n    };\n  }, [subscribedTokens]);\n\n  // This will be displayed at the top of the component\n  const renderHeader = () => /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      display: 'flex',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n      p: 2,\n      borderBottom: '1px solid',\n      borderColor: darkMode ? 'rgba(255,255,255,0.1)' : 'rgba(0,0,0,0.1)',\n      backgroundColor: darkMode ? '#1e1e1e' : '#f5f5f5'\n    },\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        alignItems: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Chip, {\n        label: isConnected ? \"Connected\" : reconnecting ? \"Reconnecting...\" : \"Disconnected\",\n        color: isConnected ? \"success\" : reconnecting ? \"warning\" : \"error\",\n        size: \"small\",\n        sx: {\n          mr: 2\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this), optionChainData && /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body1\",\n        children: [optionChainData.symbol, \" - \", optionChainData.underlyingPrice.toFixed(2)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        alignItems: 'center'\n      },\n      children: [isConnected ? /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outlined\",\n        color: \"error\",\n        size: \"small\",\n        onClick: () => {\n          // Unsubscribe from all tokens\n          if (subscribedTokens.length > 0) {\n            unsubscribeFromTokens(subscribedTokens);\n            setSubscribedTokens([]);\n          }\n          // Disconnect WebSocket\n          disconnect();\n          setIsConnected(false);\n        },\n        sx: {\n          mr: 2,\n          fontSize: '0.75rem',\n          px: 1,\n          py: 0.5\n        },\n        children: \"Disconnect\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outlined\",\n        color: \"success\",\n        size: \"small\",\n        onClick: () => {\n          // Reconnect WebSocket\n          connectToWebSocket({\n            onInitialData: handleInitialData,\n            onPriceUpdate: handlePriceUpdate,\n            onConnectionStatus: handleConnectionStatus,\n            onReconnecting: handleReconnecting,\n            onError: error => {\n              console.error('Option Chain: WebSocket error:', error);\n              setError(`Connection error: ${error.message || error}`);\n            }\n          });\n        },\n        sx: {\n          mr: 2,\n          fontSize: '0.75rem',\n          px: 1,\n          py: 0.5\n        },\n        children: \"Connect\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n        control: /*#__PURE__*/_jsxDEV(Switch, {\n          checked: darkMode,\n          onChange: toggleDarkMode\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 20\n        }, this),\n        label: \"Dark Mode\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 126,\n    columnNumber: 5\n  }, this);\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        height: '100%',\n        p: 3\n      },\n      children: [/*#__PURE__*/_jsxDEV(CircularProgress, {\n        size: 40\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body1\",\n        sx: {\n          mt: 2\n        },\n        children: \"Loading option chain data...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body2\",\n        sx: {\n          mt: 1,\n          color: 'text.secondary'\n        },\n        children: isConnected ? 'Connected to server' : reconnecting ? 'Reconnecting...' : 'Connecting to server...'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        height: '100%',\n        p: 3\n      },\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body1\",\n        color: \"error\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Get price data from updates for a given token\n  const getPriceData = token => {\n    return priceUpdates[token];\n  };\n\n  // Render row function for virtualized list\n  const renderRow = ({\n    index,\n    key,\n    style\n  }) => {\n    if (!optionChainData || !optionChainData.strikes) return null;\n    const strikeData = optionChainData.strikes[index];\n    if (!strikeData) return null;\n    const underlyingPrice = optionChainData.underlyingPrice;\n    const strikePrice = strikeData.strikePrice;\n    const strikeStyle = strikePrice < underlyingPrice ? 'in-the-money' : 'out-of-the-money';\n    const callPriceData = getPriceData(strikeData.call.token);\n    const putPriceData = getPriceData(strikeData.put.token);\n    const callPrice = callPriceData ? callPriceData.price : strikeData.call.price;\n    const callPriceChange = callPriceData ? callPriceData.percentChange : 0;\n    const callUpdated = callPriceData && callPriceData.updatedAt;\n    const putPrice = putPriceData ? putPriceData.price : strikeData.put.price;\n    const putPriceChange = putPriceData ? putPriceData.percentChange : 0;\n    const putUpdated = putPriceData && putPriceData.updatedAt;\n    const isCallSubscribed = subscribedTokens.includes(strikeData.call.token);\n    const isPutSubscribed = subscribedTokens.includes(strikeData.put.token);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: style,\n      className: `option-row ${strikeStyle} ${darkMode ? 'dark-mode' : ''}`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: `option-cell call ${callUpdated ? 'highlight' : ''}`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"price-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"price\",\n            children: callPrice.toFixed(2)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `change ${callPriceChange >= 0 ? 'positive' : 'negative'}`,\n            children: [callPriceChange > 0 ? '+' : '', callPriceChange.toFixed(2), \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"subscribe-section\",\n          children: isCallSubscribed ? /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outlined\",\n            color: \"error\",\n            size: \"small\",\n            onClick: () => handleUnsubscribe(strikeData.call.token),\n            children: \"Unsub\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outlined\",\n            color: \"primary\",\n            size: \"small\",\n            onClick: () => handleSubscribe(strikeData.call.token),\n            children: \"Sub\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"strike-cell\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"strike\",\n          children: strikePrice.toFixed(2)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `option-cell put ${putUpdated ? 'highlight' : ''}`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"price-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"price\",\n            children: putPrice.toFixed(2)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `change ${putPriceChange >= 0 ? 'positive' : 'negative'}`,\n            children: [putPriceChange > 0 ? '+' : '', putPriceChange.toFixed(2), \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"subscribe-section\",\n          children: isPutSubscribed ? /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outlined\",\n            color: \"error\",\n            size: \"small\",\n            onClick: () => handleUnsubscribe(strikeData.put.token),\n            children: \"Unsub\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outlined\",\n            color: \"primary\",\n            size: \"small\",\n            onClick: () => handleSubscribe(strikeData.put.token),\n            children: \"Sub\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 9\n      }, this)]\n    }, key, true, {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 7\n    }, this);\n  };\n  const underlyingData = priceUpdates['UNDERLYING'] || optionChainData && {\n    price: optionChainData.underlyingPrice,\n    percentChange: 0\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    className: `option-chain-container ${darkMode ? 'dark-mode' : ''}`,\n    sx: {\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100%',\n      width: '100%',\n      p: 2\n    },\n    children: [renderHeader(), underlyingData && /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mb: 2,\n        textAlign: 'center'\n      },\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        component: \"div\",\n        children: [\"Underlying: \", underlyingData.price.toFixed(2), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: underlyingData.percentChange >= 0 ? 'positive-change' : 'negative-change',\n          style: {\n            marginLeft: '10px'\n          },\n          children: [underlyingData.percentChange > 0 ? '+' : '', underlyingData.percentChange.toFixed(2), \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        mb: 1,\n        fontWeight: 'bold',\n        p: 1,\n        borderBottom: 1,\n        borderColor: 'divider'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          flex: 1,\n          textAlign: 'center'\n        },\n        children: \"CALL (CE)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          width: '100px',\n          textAlign: 'center'\n        },\n        children: \"Strike\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          flex: 1,\n          textAlign: 'center'\n        },\n        children: \"PUT (PE)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        flex: 1\n      },\n      children: optionChainData && optionChainData.strikes && /*#__PURE__*/_jsxDEV(AutoSizer, {\n        children: ({\n          height,\n          width\n        }) => /*#__PURE__*/_jsxDEV(List, {\n          width: width,\n          height: height,\n          rowCount: optionChainData.strikes.length,\n          rowHeight: 60,\n          rowRenderer: renderRow,\n          overscanRowCount: 10\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 340,\n    columnNumber: 5\n  }, this);\n};\n_s(OptionChain, \"3pstmhgiPWrvQHx6GanMhNycO5w=\");\n_c = OptionChain;\nexport default OptionChain;\nvar _c;\n$RefreshReg$(_c, \"OptionChain\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","Box","Typography","CircularProgress","Chip","Switch","FormControlLabel","Button","AutoSizer","List","connectToWebSocket","subscribeToTokens","unsubscribeFromTokens","disconnect","jsxDEV","_jsxDEV","OptionChain","darkMode","toggleDarkMode","_s","optionChainData","setOptionChainData","isLoading","setIsLoading","error","setError","isConnected","setIsConnected","reconnecting","setReconnecting","priceUpdates","setPriceUpdates","subscribedTokens","setSubscribedTokens","handleInitialData","data","console","log","handlePriceUpdate","updates","prev","newUpdates","Object","entries","forEach","token","update","updatedAt","Date","now","handleConnectionStatus","status","handleReconnecting","attempt","maxAttempts","handleSubscribe","handleUnsubscribe","filter","t","mounted","onInitialData","defaultTokens","strikes","length","midIndex","Math","floor","i","max","min","push","call","put","onPriceUpdate","onConnectionStatus","onReconnecting","onError","message","renderHeader","sx","display","justifyContent","alignItems","p","borderBottom","borderColor","backgroundColor","children","label","color","size","mr","fileName","_jsxFileName","lineNumber","columnNumber","variant","symbol","underlyingPrice","toFixed","onClick","fontSize","px","py","control","checked","onChange","flexDirection","height","mt","getPriceData","renderRow","index","key","style","strikeData","strikePrice","strikeStyle","callPriceData","putPriceData","callPrice","price","callPriceChange","percentChange","callUpdated","putPrice","putPriceChange","putUpdated","isCallSubscribed","includes","isPutSubscribed","className","underlyingData","width","mb","textAlign","component","marginLeft","fontWeight","flex","rowCount","rowHeight","rowRenderer","overscanRowCount","_c","$RefreshReg$"],"sources":["C:/Users/scr/OneDrive/Desktop/new/frontend/src/components/OptionChain.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { Box, Typography, CircularProgress, Chip, Switch, FormControlLabel, Button } from '@mui/material';\nimport { AutoSizer, List } from 'react-virtualized';\nimport { connectToWebSocket, subscribeToTokens, unsubscribeFromTokens, disconnect } from '../services/websocketService';\nimport './OptionChain.css';\n\nconst OptionChain = ({ darkMode, toggleDarkMode }) => {\n  const [optionChainData, setOptionChainData] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [isConnected, setIsConnected] = useState(false);\n  const [reconnecting, setReconnecting] = useState(false);\n  const [priceUpdates, setPriceUpdates] = useState({});\n  const [subscribedTokens, setSubscribedTokens] = useState(['UNDERLYING']);\n\n  const handleInitialData = useCallback((data) => {\n    console.log('Received initial option chain data', data);\n    setOptionChainData(data);\n    setIsLoading(false);\n  }, []);\n\n  // Handle individual price updates from WebSocket\n  const handlePriceUpdate = useCallback((updates) => {\n    if (!updates) return;\n\n    setPriceUpdates(prev => {\n      const newUpdates = { ...prev };\n      Object.entries(updates).forEach(([token, update]) => {\n        newUpdates[token] = {\n          ...update,\n          updatedAt: Date.now()\n        };\n      });\n      return newUpdates;\n    });\n  }, []);\n\n  const handleConnectionStatus = useCallback((status) => {\n    setIsConnected(status);\n    if (status) {\n      setReconnecting(false);\n    }\n  }, []);\n\n  const handleReconnecting = useCallback((attempt, maxAttempts) => {\n    console.log(`Reconnecting ${attempt}/${maxAttempts}`);\n    setReconnecting(true);\n  }, []);\n\n  // Subscribe to a specific option\n  const handleSubscribe = useCallback((token) => {\n    console.log('Subscribing to token:', token);\n    subscribeToTokens([token]);\n    setSubscribedTokens(prev => [...prev, token]);\n  }, []);\n\n  // Unsubscribe from a specific option\n  const handleUnsubscribe = useCallback((token) => {\n    console.log('Unsubscribing from token:', token);\n    unsubscribeFromTokens([token]);\n    setSubscribedTokens(prev => prev.filter(t => t !== token));\n  }, []);\n\n  useEffect(() => {\n    let mounted = true;\n    setIsLoading(true);\n\n    // Connect to WebSocket\n    connectToWebSocket({\n      onInitialData: (data) => {\n        if (mounted) {\n          console.log('Option Chain: Received initial data', data);\n          handleInitialData(data);\n          // Automatically subscribe to underlying and some options for demo\n          const defaultTokens = ['UNDERLYING'];\n          // Add some strikes around the current price\n          if (data && data.strikes && data.strikes.length > 0) {\n            const midIndex = Math.floor(data.strikes.length / 2);\n            for (let i = Math.max(0, midIndex - 1); i < Math.min(data.strikes.length, midIndex + 2); i++) {\n              defaultTokens.push(data.strikes[i].call.token);\n              defaultTokens.push(data.strikes[i].put.token);\n            }\n          }\n          // Subscribe to these tokens\n          subscribeToTokens(defaultTokens);\n          setSubscribedTokens(defaultTokens);\n        }\n      },\n      onPriceUpdate: (data) => {\n        if (mounted) {\n          handlePriceUpdate(data);\n        }\n      },\n      onConnectionStatus: (status) => {\n        if (mounted) handleConnectionStatus(status);\n      },\n      onReconnecting: (attempt, maxAttempts) => {\n        if (mounted) handleReconnecting(attempt, maxAttempts);\n      },\n      onError: (error) => {\n        console.error('Option Chain: WebSocket error:', error);\n        if (mounted) {\n          setError(`Connection error: ${error.message || error}`);\n          setIsLoading(false);\n        }\n      }\n    });\n\n    return () => {\n      mounted = false;\n    };\n  }, [handleInitialData, handlePriceUpdate, handleConnectionStatus, handleReconnecting]);\n\n  // Handle clean unsubscribe on unmount\n  useEffect(() => {\n    return () => {\n      if (subscribedTokens.length > 0) {\n        console.log('Unsubscribing from all tokens on unmount');\n        unsubscribeFromTokens(subscribedTokens);\n      }\n    };\n  }, [subscribedTokens]);\n\n  // This will be displayed at the top of the component\n  const renderHeader = () => (\n    <Box sx={{ \n      display: 'flex', \n      justifyContent: 'space-between', \n      alignItems: 'center',\n      p: 2,\n      borderBottom: '1px solid',\n      borderColor: darkMode ? 'rgba(255,255,255,0.1)' : 'rgba(0,0,0,0.1)',\n      backgroundColor: darkMode ? '#1e1e1e' : '#f5f5f5'\n    }}>\n      <Box sx={{ display: 'flex', alignItems: 'center' }}>\n        <Chip \n          label={isConnected ? \"Connected\" : reconnecting ? \"Reconnecting...\" : \"Disconnected\"} \n          color={isConnected ? \"success\" : reconnecting ? \"warning\" : \"error\"}\n          size=\"small\"\n          sx={{ mr: 2 }}\n        />\n        {optionChainData && (\n          <Typography variant=\"body1\">\n            {optionChainData.symbol} - {optionChainData.underlyingPrice.toFixed(2)}\n          </Typography>\n        )}\n      </Box>\n      <Box sx={{ display: 'flex', alignItems: 'center' }}>\n        {isConnected ? (\n          <Button\n            variant=\"outlined\"\n            color=\"error\"\n            size=\"small\"\n            onClick={() => {\n              // Unsubscribe from all tokens\n              if (subscribedTokens.length > 0) {\n                unsubscribeFromTokens(subscribedTokens);\n                setSubscribedTokens([]);\n              }\n              // Disconnect WebSocket\n              disconnect();\n              setIsConnected(false);\n            }}\n            sx={{ mr: 2, fontSize: '0.75rem', px: 1, py: 0.5 }}\n          >\n            Disconnect\n          </Button>\n        ) : (\n          <Button\n            variant=\"outlined\"\n            color=\"success\"\n            size=\"small\"\n            onClick={() => {\n              // Reconnect WebSocket\n              connectToWebSocket({\n                onInitialData: handleInitialData,\n                onPriceUpdate: handlePriceUpdate,\n                onConnectionStatus: handleConnectionStatus,\n                onReconnecting: handleReconnecting,\n                onError: (error) => {\n                  console.error('Option Chain: WebSocket error:', error);\n                  setError(`Connection error: ${error.message || error}`);\n                }\n              });\n            }}\n            sx={{ mr: 2, fontSize: '0.75rem', px: 1, py: 0.5 }}\n          >\n            Connect\n          </Button>\n        )}\n        <FormControlLabel\n          control={<Switch checked={darkMode} onChange={toggleDarkMode} />}\n          label=\"Dark Mode\"\n        />\n      </Box>\n    </Box>\n  );\n\n  if (isLoading) {\n    return (\n      <Box sx={{\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        height: '100%',\n        p: 3\n      }}>\n        <CircularProgress size={40} />\n        <Typography variant=\"body1\" sx={{ mt: 2 }}>\n          Loading option chain data...\n        </Typography>\n        <Typography variant=\"body2\" sx={{ mt: 1, color: 'text.secondary' }}>\n          {isConnected ? 'Connected to server' : reconnecting ? 'Reconnecting...' : 'Connecting to server...'}\n        </Typography>\n      </Box>\n    );\n  }\n\n  if (error) {\n    return (\n      <Box sx={{\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        height: '100%',\n        p: 3\n      }}>\n        <Typography variant=\"body1\" color=\"error\">{error}</Typography>\n      </Box>\n    );\n  }\n\n  // Get price data from updates for a given token\n  const getPriceData = (token) => {\n    return priceUpdates[token];\n  };\n\n  // Render row function for virtualized list\n  const renderRow = ({ index, key, style }) => {\n    if (!optionChainData || !optionChainData.strikes) return null;\n    \n    const strikeData = optionChainData.strikes[index];\n    if (!strikeData) return null;\n    \n    const underlyingPrice = optionChainData.underlyingPrice;\n    const strikePrice = strikeData.strikePrice;\n    const strikeStyle = strikePrice < underlyingPrice ? 'in-the-money' : 'out-of-the-money';\n    \n    const callPriceData = getPriceData(strikeData.call.token);\n    const putPriceData = getPriceData(strikeData.put.token);\n    \n    const callPrice = callPriceData ? callPriceData.price : strikeData.call.price;\n    const callPriceChange = callPriceData ? callPriceData.percentChange : 0;\n    const callUpdated = callPriceData && callPriceData.updatedAt;\n    \n    const putPrice = putPriceData ? putPriceData.price : strikeData.put.price;\n    const putPriceChange = putPriceData ? putPriceData.percentChange : 0;\n    const putUpdated = putPriceData && putPriceData.updatedAt;\n\n    const isCallSubscribed = subscribedTokens.includes(strikeData.call.token);\n    const isPutSubscribed = subscribedTokens.includes(strikeData.put.token);\n\n    return (\n      <div key={key} style={style} className={`option-row ${strikeStyle} ${darkMode ? 'dark-mode' : ''}`}>\n        {/* Call Option (CE) */}\n        <div className={`option-cell call ${callUpdated ? 'highlight' : ''}`}>\n          <div className=\"price-section\">\n            <div className=\"price\">{callPrice.toFixed(2)}</div>\n            <div className={`change ${callPriceChange >= 0 ? 'positive' : 'negative'}`}>\n              {callPriceChange > 0 ? '+' : ''}{callPriceChange.toFixed(2)}%\n            </div>\n          </div>\n          <div className=\"subscribe-section\">\n            {isCallSubscribed ? (\n              <Button \n                variant=\"outlined\" \n                color=\"error\" \n                size=\"small\"\n                onClick={() => handleUnsubscribe(strikeData.call.token)}\n              >\n                Unsub\n              </Button>\n            ) : (\n              <Button \n                variant=\"outlined\" \n                color=\"primary\" \n                size=\"small\"\n                onClick={() => handleSubscribe(strikeData.call.token)}\n              >\n                Sub\n              </Button>\n            )}\n          </div>\n        </div>\n        \n        {/* Strike Price */}\n        <div className=\"strike-cell\">\n          <div className=\"strike\">{strikePrice.toFixed(2)}</div>\n        </div>\n        \n        {/* Put Option (PE) */}\n        <div className={`option-cell put ${putUpdated ? 'highlight' : ''}`}>\n          <div className=\"price-section\">\n            <div className=\"price\">{putPrice.toFixed(2)}</div>\n            <div className={`change ${putPriceChange >= 0 ? 'positive' : 'negative'}`}>\n              {putPriceChange > 0 ? '+' : ''}{putPriceChange.toFixed(2)}%\n            </div>\n          </div>\n          <div className=\"subscribe-section\">\n            {isPutSubscribed ? (\n              <Button \n                variant=\"outlined\" \n                color=\"error\" \n                size=\"small\"\n                onClick={() => handleUnsubscribe(strikeData.put.token)}\n              >\n                Unsub\n              </Button>\n            ) : (\n              <Button \n                variant=\"outlined\" \n                color=\"primary\" \n                size=\"small\"\n                onClick={() => handleSubscribe(strikeData.put.token)}\n              >\n                Sub\n              </Button>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  const underlyingData = priceUpdates['UNDERLYING'] || (optionChainData && { price: optionChainData.underlyingPrice, percentChange: 0 });\n\n  return (\n    <Box className={`option-chain-container ${darkMode ? 'dark-mode' : ''}`} sx={{\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100%',\n      width: '100%',\n      p: 2\n    }}>\n      {renderHeader()}\n      \n      {/* Underlying price */}\n      {underlyingData && (\n        <Box sx={{ mb: 2, textAlign: 'center' }}>\n          <Typography variant=\"h6\" component=\"div\">\n            Underlying: {underlyingData.price.toFixed(2)}\n            <span className={underlyingData.percentChange >= 0 ? 'positive-change' : 'negative-change'} style={{ marginLeft: '10px' }}>\n              {underlyingData.percentChange > 0 ? '+' : ''}{underlyingData.percentChange.toFixed(2)}%\n            </span>\n          </Typography>\n        </Box>\n      )}\n      \n      {/* Option chain header */}\n      <Box sx={{ \n        display: 'flex', \n        justifyContent: 'space-between', \n        mb: 1,\n        fontWeight: 'bold',\n        p: 1,\n        borderBottom: 1,\n        borderColor: 'divider'\n      }}>\n        <Box sx={{ flex: 1, textAlign: 'center' }}>CALL (CE)</Box>\n        <Box sx={{ width: '100px', textAlign: 'center' }}>Strike</Box>\n        <Box sx={{ flex: 1, textAlign: 'center' }}>PUT (PE)</Box>\n      </Box>\n\n      <Box sx={{ flex: 1 }}>\n        {optionChainData && optionChainData.strikes && (\n          <AutoSizer>\n            {({ height, width }) => (\n              <List\n                width={width}\n                height={height}\n                rowCount={optionChainData.strikes.length}\n                rowHeight={60}\n                rowRenderer={renderRow}\n                overscanRowCount={10}\n              />\n            )}\n          </AutoSizer>\n        )}\n      </Box>\n    </Box>\n  );\n};\n\nexport default OptionChain;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,QAAQ,OAAO;AAC/D,SAASC,GAAG,EAAEC,UAAU,EAAEC,gBAAgB,EAAEC,IAAI,EAAEC,MAAM,EAAEC,gBAAgB,EAAEC,MAAM,QAAQ,eAAe;AACzG,SAASC,SAAS,EAAEC,IAAI,QAAQ,mBAAmB;AACnD,SAASC,kBAAkB,EAAEC,iBAAiB,EAAEC,qBAAqB,EAAEC,UAAU,QAAQ,8BAA8B;AACvH,OAAO,mBAAmB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE3B,MAAMC,WAAW,GAAGA,CAAC;EAAEC,QAAQ;EAAEC;AAAe,CAAC,KAAK;EAAAC,EAAA;EACpD,MAAM,CAACC,eAAe,EAAEC,kBAAkB,CAAC,GAAGvB,QAAQ,CAAC,IAAI,CAAC;EAC5D,MAAM,CAACwB,SAAS,EAAEC,YAAY,CAAC,GAAGzB,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAAC0B,KAAK,EAAEC,QAAQ,CAAC,GAAG3B,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAAC4B,WAAW,EAAEC,cAAc,CAAC,GAAG7B,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAAC8B,YAAY,EAAEC,eAAe,CAAC,GAAG/B,QAAQ,CAAC,KAAK,CAAC;EACvD,MAAM,CAACgC,YAAY,EAAEC,eAAe,CAAC,GAAGjC,QAAQ,CAAC,CAAC,CAAC,CAAC;EACpD,MAAM,CAACkC,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGnC,QAAQ,CAAC,CAAC,YAAY,CAAC,CAAC;EAExE,MAAMoC,iBAAiB,GAAGlC,WAAW,CAAEmC,IAAI,IAAK;IAC9CC,OAAO,CAACC,GAAG,CAAC,oCAAoC,EAAEF,IAAI,CAAC;IACvDd,kBAAkB,CAACc,IAAI,CAAC;IACxBZ,YAAY,CAAC,KAAK,CAAC;EACrB,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMe,iBAAiB,GAAGtC,WAAW,CAAEuC,OAAO,IAAK;IACjD,IAAI,CAACA,OAAO,EAAE;IAEdR,eAAe,CAACS,IAAI,IAAI;MACtB,MAAMC,UAAU,GAAG;QAAE,GAAGD;MAAK,CAAC;MAC9BE,MAAM,CAACC,OAAO,CAACJ,OAAO,CAAC,CAACK,OAAO,CAAC,CAAC,CAACC,KAAK,EAAEC,MAAM,CAAC,KAAK;QACnDL,UAAU,CAACI,KAAK,CAAC,GAAG;UAClB,GAAGC,MAAM;UACTC,SAAS,EAAEC,IAAI,CAACC,GAAG,CAAC;QACtB,CAAC;MACH,CAAC,CAAC;MACF,OAAOR,UAAU;IACnB,CAAC,CAAC;EACJ,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMS,sBAAsB,GAAGlD,WAAW,CAAEmD,MAAM,IAAK;IACrDxB,cAAc,CAACwB,MAAM,CAAC;IACtB,IAAIA,MAAM,EAAE;MACVtB,eAAe,CAAC,KAAK,CAAC;IACxB;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMuB,kBAAkB,GAAGpD,WAAW,CAAC,CAACqD,OAAO,EAAEC,WAAW,KAAK;IAC/DlB,OAAO,CAACC,GAAG,CAAC,gBAAgBgB,OAAO,IAAIC,WAAW,EAAE,CAAC;IACrDzB,eAAe,CAAC,IAAI,CAAC;EACvB,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAM0B,eAAe,GAAGvD,WAAW,CAAE6C,KAAK,IAAK;IAC7CT,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAEQ,KAAK,CAAC;IAC3ClC,iBAAiB,CAAC,CAACkC,KAAK,CAAC,CAAC;IAC1BZ,mBAAmB,CAACO,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAEK,KAAK,CAAC,CAAC;EAC/C,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMW,iBAAiB,GAAGxD,WAAW,CAAE6C,KAAK,IAAK;IAC/CT,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAEQ,KAAK,CAAC;IAC/CjC,qBAAqB,CAAC,CAACiC,KAAK,CAAC,CAAC;IAC9BZ,mBAAmB,CAACO,IAAI,IAAIA,IAAI,CAACiB,MAAM,CAACC,CAAC,IAAIA,CAAC,KAAKb,KAAK,CAAC,CAAC;EAC5D,CAAC,EAAE,EAAE,CAAC;EAEN9C,SAAS,CAAC,MAAM;IACd,IAAI4D,OAAO,GAAG,IAAI;IAClBpC,YAAY,CAAC,IAAI,CAAC;;IAElB;IACAb,kBAAkB,CAAC;MACjBkD,aAAa,EAAGzB,IAAI,IAAK;QACvB,IAAIwB,OAAO,EAAE;UACXvB,OAAO,CAACC,GAAG,CAAC,qCAAqC,EAAEF,IAAI,CAAC;UACxDD,iBAAiB,CAACC,IAAI,CAAC;UACvB;UACA,MAAM0B,aAAa,GAAG,CAAC,YAAY,CAAC;UACpC;UACA,IAAI1B,IAAI,IAAIA,IAAI,CAAC2B,OAAO,IAAI3B,IAAI,CAAC2B,OAAO,CAACC,MAAM,GAAG,CAAC,EAAE;YACnD,MAAMC,QAAQ,GAAGC,IAAI,CAACC,KAAK,CAAC/B,IAAI,CAAC2B,OAAO,CAACC,MAAM,GAAG,CAAC,CAAC;YACpD,KAAK,IAAII,CAAC,GAAGF,IAAI,CAACG,GAAG,CAAC,CAAC,EAAEJ,QAAQ,GAAG,CAAC,CAAC,EAAEG,CAAC,GAAGF,IAAI,CAACI,GAAG,CAAClC,IAAI,CAAC2B,OAAO,CAACC,MAAM,EAAEC,QAAQ,GAAG,CAAC,CAAC,EAAEG,CAAC,EAAE,EAAE;cAC5FN,aAAa,CAACS,IAAI,CAACnC,IAAI,CAAC2B,OAAO,CAACK,CAAC,CAAC,CAACI,IAAI,CAAC1B,KAAK,CAAC;cAC9CgB,aAAa,CAACS,IAAI,CAACnC,IAAI,CAAC2B,OAAO,CAACK,CAAC,CAAC,CAACK,GAAG,CAAC3B,KAAK,CAAC;YAC/C;UACF;UACA;UACAlC,iBAAiB,CAACkD,aAAa,CAAC;UAChC5B,mBAAmB,CAAC4B,aAAa,CAAC;QACpC;MACF,CAAC;MACDY,aAAa,EAAGtC,IAAI,IAAK;QACvB,IAAIwB,OAAO,EAAE;UACXrB,iBAAiB,CAACH,IAAI,CAAC;QACzB;MACF,CAAC;MACDuC,kBAAkB,EAAGvB,MAAM,IAAK;QAC9B,IAAIQ,OAAO,EAAET,sBAAsB,CAACC,MAAM,CAAC;MAC7C,CAAC;MACDwB,cAAc,EAAEA,CAACtB,OAAO,EAAEC,WAAW,KAAK;QACxC,IAAIK,OAAO,EAAEP,kBAAkB,CAACC,OAAO,EAAEC,WAAW,CAAC;MACvD,CAAC;MACDsB,OAAO,EAAGpD,KAAK,IAAK;QAClBY,OAAO,CAACZ,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;QACtD,IAAImC,OAAO,EAAE;UACXlC,QAAQ,CAAC,qBAAqBD,KAAK,CAACqD,OAAO,IAAIrD,KAAK,EAAE,CAAC;UACvDD,YAAY,CAAC,KAAK,CAAC;QACrB;MACF;IACF,CAAC,CAAC;IAEF,OAAO,MAAM;MACXoC,OAAO,GAAG,KAAK;IACjB,CAAC;EACH,CAAC,EAAE,CAACzB,iBAAiB,EAAEI,iBAAiB,EAAEY,sBAAsB,EAAEE,kBAAkB,CAAC,CAAC;;EAEtF;EACArD,SAAS,CAAC,MAAM;IACd,OAAO,MAAM;MACX,IAAIiC,gBAAgB,CAAC+B,MAAM,GAAG,CAAC,EAAE;QAC/B3B,OAAO,CAACC,GAAG,CAAC,0CAA0C,CAAC;QACvDzB,qBAAqB,CAACoB,gBAAgB,CAAC;MACzC;IACF,CAAC;EACH,CAAC,EAAE,CAACA,gBAAgB,CAAC,CAAC;;EAEtB;EACA,MAAM8C,YAAY,GAAGA,CAAA,kBACnB/D,OAAA,CAACd,GAAG;IAAC8E,EAAE,EAAE;MACPC,OAAO,EAAE,MAAM;MACfC,cAAc,EAAE,eAAe;MAC/BC,UAAU,EAAE,QAAQ;MACpBC,CAAC,EAAE,CAAC;MACJC,YAAY,EAAE,WAAW;MACzBC,WAAW,EAAEpE,QAAQ,GAAG,uBAAuB,GAAG,iBAAiB;MACnEqE,eAAe,EAAErE,QAAQ,GAAG,SAAS,GAAG;IAC1C,CAAE;IAAAsE,QAAA,gBACAxE,OAAA,CAACd,GAAG;MAAC8E,EAAE,EAAE;QAAEC,OAAO,EAAE,MAAM;QAAEE,UAAU,EAAE;MAAS,CAAE;MAAAK,QAAA,gBACjDxE,OAAA,CAACX,IAAI;QACHoF,KAAK,EAAE9D,WAAW,GAAG,WAAW,GAAGE,YAAY,GAAG,iBAAiB,GAAG,cAAe;QACrF6D,KAAK,EAAE/D,WAAW,GAAG,SAAS,GAAGE,YAAY,GAAG,SAAS,GAAG,OAAQ;QACpE8D,IAAI,EAAC,OAAO;QACZX,EAAE,EAAE;UAAEY,EAAE,EAAE;QAAE;MAAE;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACf,CAAC,EACD3E,eAAe,iBACdL,OAAA,CAACb,UAAU;QAAC8F,OAAO,EAAC,OAAO;QAAAT,QAAA,GACxBnE,eAAe,CAAC6E,MAAM,EAAC,KAAG,EAAC7E,eAAe,CAAC8E,eAAe,CAACC,OAAO,CAAC,CAAC,CAAC;MAAA;QAAAP,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC5D,CACb;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,eACNhF,OAAA,CAACd,GAAG;MAAC8E,EAAE,EAAE;QAAEC,OAAO,EAAE,MAAM;QAAEE,UAAU,EAAE;MAAS,CAAE;MAAAK,QAAA,GAChD7D,WAAW,gBACVX,OAAA,CAACR,MAAM;QACLyF,OAAO,EAAC,UAAU;QAClBP,KAAK,EAAC,OAAO;QACbC,IAAI,EAAC,OAAO;QACZU,OAAO,EAAEA,CAAA,KAAM;UACb;UACA,IAAIpE,gBAAgB,CAAC+B,MAAM,GAAG,CAAC,EAAE;YAC/BnD,qBAAqB,CAACoB,gBAAgB,CAAC;YACvCC,mBAAmB,CAAC,EAAE,CAAC;UACzB;UACA;UACApB,UAAU,CAAC,CAAC;UACZc,cAAc,CAAC,KAAK,CAAC;QACvB,CAAE;QACFoD,EAAE,EAAE;UAAEY,EAAE,EAAE,CAAC;UAAEU,QAAQ,EAAE,SAAS;UAAEC,EAAE,EAAE,CAAC;UAAEC,EAAE,EAAE;QAAI,CAAE;QAAAhB,QAAA,EACpD;MAED;QAAAK,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,gBAEThF,OAAA,CAACR,MAAM;QACLyF,OAAO,EAAC,UAAU;QAClBP,KAAK,EAAC,SAAS;QACfC,IAAI,EAAC,OAAO;QACZU,OAAO,EAAEA,CAAA,KAAM;UACb;UACA1F,kBAAkB,CAAC;YACjBkD,aAAa,EAAE1B,iBAAiB;YAChCuC,aAAa,EAAEnC,iBAAiB;YAChCoC,kBAAkB,EAAExB,sBAAsB;YAC1CyB,cAAc,EAAEvB,kBAAkB;YAClCwB,OAAO,EAAGpD,KAAK,IAAK;cAClBY,OAAO,CAACZ,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;cACtDC,QAAQ,CAAC,qBAAqBD,KAAK,CAACqD,OAAO,IAAIrD,KAAK,EAAE,CAAC;YACzD;UACF,CAAC,CAAC;QACJ,CAAE;QACFuD,EAAE,EAAE;UAAEY,EAAE,EAAE,CAAC;UAAEU,QAAQ,EAAE,SAAS;UAAEC,EAAE,EAAE,CAAC;UAAEC,EAAE,EAAE;QAAI,CAAE;QAAAhB,QAAA,EACpD;MAED;QAAAK,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CACT,eACDhF,OAAA,CAACT,gBAAgB;QACfkG,OAAO,eAAEzF,OAAA,CAACV,MAAM;UAACoG,OAAO,EAAExF,QAAS;UAACyF,QAAQ,EAAExF;QAAe;UAAA0E,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAE;QACjEP,KAAK,EAAC;MAAW;QAAAI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAClB,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CACN;EAED,IAAIzE,SAAS,EAAE;IACb,oBACEP,OAAA,CAACd,GAAG;MAAC8E,EAAE,EAAE;QACPC,OAAO,EAAE,MAAM;QACf2B,aAAa,EAAE,QAAQ;QACvBzB,UAAU,EAAE,QAAQ;QACpBD,cAAc,EAAE,QAAQ;QACxB2B,MAAM,EAAE,MAAM;QACdzB,CAAC,EAAE;MACL,CAAE;MAAAI,QAAA,gBACAxE,OAAA,CAACZ,gBAAgB;QAACuF,IAAI,EAAE;MAAG;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAC9BhF,OAAA,CAACb,UAAU;QAAC8F,OAAO,EAAC,OAAO;QAACjB,EAAE,EAAE;UAAE8B,EAAE,EAAE;QAAE,CAAE;QAAAtB,QAAA,EAAC;MAE3C;QAAAK,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAY,CAAC,eACbhF,OAAA,CAACb,UAAU;QAAC8F,OAAO,EAAC,OAAO;QAACjB,EAAE,EAAE;UAAE8B,EAAE,EAAE,CAAC;UAAEpB,KAAK,EAAE;QAAiB,CAAE;QAAAF,QAAA,EAChE7D,WAAW,GAAG,qBAAqB,GAAGE,YAAY,GAAG,iBAAiB,GAAG;MAAyB;QAAAgE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACzF,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACV,CAAC;EAEV;EAEA,IAAIvE,KAAK,EAAE;IACT,oBACET,OAAA,CAACd,GAAG;MAAC8E,EAAE,EAAE;QACPC,OAAO,EAAE,MAAM;QACf2B,aAAa,EAAE,QAAQ;QACvBzB,UAAU,EAAE,QAAQ;QACpBD,cAAc,EAAE,QAAQ;QACxB2B,MAAM,EAAE,MAAM;QACdzB,CAAC,EAAE;MACL,CAAE;MAAAI,QAAA,eACAxE,OAAA,CAACb,UAAU;QAAC8F,OAAO,EAAC,OAAO;QAACP,KAAK,EAAC,OAAO;QAAAF,QAAA,EAAE/D;MAAK;QAAAoE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAa;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC3D,CAAC;EAEV;;EAEA;EACA,MAAMe,YAAY,GAAIjE,KAAK,IAAK;IAC9B,OAAOf,YAAY,CAACe,KAAK,CAAC;EAC5B,CAAC;;EAED;EACA,MAAMkE,SAAS,GAAGA,CAAC;IAAEC,KAAK;IAAEC,GAAG;IAAEC;EAAM,CAAC,KAAK;IAC3C,IAAI,CAAC9F,eAAe,IAAI,CAACA,eAAe,CAAC0C,OAAO,EAAE,OAAO,IAAI;IAE7D,MAAMqD,UAAU,GAAG/F,eAAe,CAAC0C,OAAO,CAACkD,KAAK,CAAC;IACjD,IAAI,CAACG,UAAU,EAAE,OAAO,IAAI;IAE5B,MAAMjB,eAAe,GAAG9E,eAAe,CAAC8E,eAAe;IACvD,MAAMkB,WAAW,GAAGD,UAAU,CAACC,WAAW;IAC1C,MAAMC,WAAW,GAAGD,WAAW,GAAGlB,eAAe,GAAG,cAAc,GAAG,kBAAkB;IAEvF,MAAMoB,aAAa,GAAGR,YAAY,CAACK,UAAU,CAAC5C,IAAI,CAAC1B,KAAK,CAAC;IACzD,MAAM0E,YAAY,GAAGT,YAAY,CAACK,UAAU,CAAC3C,GAAG,CAAC3B,KAAK,CAAC;IAEvD,MAAM2E,SAAS,GAAGF,aAAa,GAAGA,aAAa,CAACG,KAAK,GAAGN,UAAU,CAAC5C,IAAI,CAACkD,KAAK;IAC7E,MAAMC,eAAe,GAAGJ,aAAa,GAAGA,aAAa,CAACK,aAAa,GAAG,CAAC;IACvE,MAAMC,WAAW,GAAGN,aAAa,IAAIA,aAAa,CAACvE,SAAS;IAE5D,MAAM8E,QAAQ,GAAGN,YAAY,GAAGA,YAAY,CAACE,KAAK,GAAGN,UAAU,CAAC3C,GAAG,CAACiD,KAAK;IACzE,MAAMK,cAAc,GAAGP,YAAY,GAAGA,YAAY,CAACI,aAAa,GAAG,CAAC;IACpE,MAAMI,UAAU,GAAGR,YAAY,IAAIA,YAAY,CAACxE,SAAS;IAEzD,MAAMiF,gBAAgB,GAAGhG,gBAAgB,CAACiG,QAAQ,CAACd,UAAU,CAAC5C,IAAI,CAAC1B,KAAK,CAAC;IACzE,MAAMqF,eAAe,GAAGlG,gBAAgB,CAACiG,QAAQ,CAACd,UAAU,CAAC3C,GAAG,CAAC3B,KAAK,CAAC;IAEvE,oBACE9B,OAAA;MAAemG,KAAK,EAAEA,KAAM;MAACiB,SAAS,EAAE,cAAcd,WAAW,IAAIpG,QAAQ,GAAG,WAAW,GAAG,EAAE,EAAG;MAAAsE,QAAA,gBAEjGxE,OAAA;QAAKoH,SAAS,EAAE,oBAAoBP,WAAW,GAAG,WAAW,GAAG,EAAE,EAAG;QAAArC,QAAA,gBACnExE,OAAA;UAAKoH,SAAS,EAAC,eAAe;UAAA5C,QAAA,gBAC5BxE,OAAA;YAAKoH,SAAS,EAAC,OAAO;YAAA5C,QAAA,EAAEiC,SAAS,CAACrB,OAAO,CAAC,CAAC;UAAC;YAAAP,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eACnDhF,OAAA;YAAKoH,SAAS,EAAE,UAAUT,eAAe,IAAI,CAAC,GAAG,UAAU,GAAG,UAAU,EAAG;YAAAnC,QAAA,GACxEmC,eAAe,GAAG,CAAC,GAAG,GAAG,GAAG,EAAE,EAAEA,eAAe,CAACvB,OAAO,CAAC,CAAC,CAAC,EAAC,GAC9D;UAAA;YAAAP,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eACNhF,OAAA;UAAKoH,SAAS,EAAC,mBAAmB;UAAA5C,QAAA,EAC/ByC,gBAAgB,gBACfjH,OAAA,CAACR,MAAM;YACLyF,OAAO,EAAC,UAAU;YAClBP,KAAK,EAAC,OAAO;YACbC,IAAI,EAAC,OAAO;YACZU,OAAO,EAAEA,CAAA,KAAM5C,iBAAiB,CAAC2D,UAAU,CAAC5C,IAAI,CAAC1B,KAAK,CAAE;YAAA0C,QAAA,EACzD;UAED;YAAAK,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,gBAEThF,OAAA,CAACR,MAAM;YACLyF,OAAO,EAAC,UAAU;YAClBP,KAAK,EAAC,SAAS;YACfC,IAAI,EAAC,OAAO;YACZU,OAAO,EAAEA,CAAA,KAAM7C,eAAe,CAAC4D,UAAU,CAAC5C,IAAI,CAAC1B,KAAK,CAAE;YAAA0C,QAAA,EACvD;UAED;YAAAK,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ;QACT;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAGNhF,OAAA;QAAKoH,SAAS,EAAC,aAAa;QAAA5C,QAAA,eAC1BxE,OAAA;UAAKoH,SAAS,EAAC,QAAQ;UAAA5C,QAAA,EAAE6B,WAAW,CAACjB,OAAO,CAAC,CAAC;QAAC;UAAAP,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnD,CAAC,eAGNhF,OAAA;QAAKoH,SAAS,EAAE,mBAAmBJ,UAAU,GAAG,WAAW,GAAG,EAAE,EAAG;QAAAxC,QAAA,gBACjExE,OAAA;UAAKoH,SAAS,EAAC,eAAe;UAAA5C,QAAA,gBAC5BxE,OAAA;YAAKoH,SAAS,EAAC,OAAO;YAAA5C,QAAA,EAAEsC,QAAQ,CAAC1B,OAAO,CAAC,CAAC;UAAC;YAAAP,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAClDhF,OAAA;YAAKoH,SAAS,EAAE,UAAUL,cAAc,IAAI,CAAC,GAAG,UAAU,GAAG,UAAU,EAAG;YAAAvC,QAAA,GACvEuC,cAAc,GAAG,CAAC,GAAG,GAAG,GAAG,EAAE,EAAEA,cAAc,CAAC3B,OAAO,CAAC,CAAC,CAAC,EAAC,GAC5D;UAAA;YAAAP,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eACNhF,OAAA;UAAKoH,SAAS,EAAC,mBAAmB;UAAA5C,QAAA,EAC/B2C,eAAe,gBACdnH,OAAA,CAACR,MAAM;YACLyF,OAAO,EAAC,UAAU;YAClBP,KAAK,EAAC,OAAO;YACbC,IAAI,EAAC,OAAO;YACZU,OAAO,EAAEA,CAAA,KAAM5C,iBAAiB,CAAC2D,UAAU,CAAC3C,GAAG,CAAC3B,KAAK,CAAE;YAAA0C,QAAA,EACxD;UAED;YAAAK,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,gBAEThF,OAAA,CAACR,MAAM;YACLyF,OAAO,EAAC,UAAU;YAClBP,KAAK,EAAC,SAAS;YACfC,IAAI,EAAC,OAAO;YACZU,OAAO,EAAEA,CAAA,KAAM7C,eAAe,CAAC4D,UAAU,CAAC3C,GAAG,CAAC3B,KAAK,CAAE;YAAA0C,QAAA,EACtD;UAED;YAAAK,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ;QACT;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA,GAlEEkB,GAAG;MAAArB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAmER,CAAC;EAEV,CAAC;EAED,MAAMqC,cAAc,GAAGtG,YAAY,CAAC,YAAY,CAAC,IAAKV,eAAe,IAAI;IAAEqG,KAAK,EAAErG,eAAe,CAAC8E,eAAe;IAAEyB,aAAa,EAAE;EAAE,CAAE;EAEtI,oBACE5G,OAAA,CAACd,GAAG;IAACkI,SAAS,EAAE,0BAA0BlH,QAAQ,GAAG,WAAW,GAAG,EAAE,EAAG;IAAC8D,EAAE,EAAE;MAC3EC,OAAO,EAAE,MAAM;MACf2B,aAAa,EAAE,QAAQ;MACvBC,MAAM,EAAE,MAAM;MACdyB,KAAK,EAAE,MAAM;MACblD,CAAC,EAAE;IACL,CAAE;IAAAI,QAAA,GACCT,YAAY,CAAC,CAAC,EAGdsD,cAAc,iBACbrH,OAAA,CAACd,GAAG;MAAC8E,EAAE,EAAE;QAAEuD,EAAE,EAAE,CAAC;QAAEC,SAAS,EAAE;MAAS,CAAE;MAAAhD,QAAA,eACtCxE,OAAA,CAACb,UAAU;QAAC8F,OAAO,EAAC,IAAI;QAACwC,SAAS,EAAC,KAAK;QAAAjD,QAAA,GAAC,cAC3B,EAAC6C,cAAc,CAACX,KAAK,CAACtB,OAAO,CAAC,CAAC,CAAC,eAC5CpF,OAAA;UAAMoH,SAAS,EAAEC,cAAc,CAACT,aAAa,IAAI,CAAC,GAAG,iBAAiB,GAAG,iBAAkB;UAACT,KAAK,EAAE;YAAEuB,UAAU,EAAE;UAAO,CAAE;UAAAlD,QAAA,GACvH6C,cAAc,CAACT,aAAa,GAAG,CAAC,GAAG,GAAG,GAAG,EAAE,EAAES,cAAc,CAACT,aAAa,CAACxB,OAAO,CAAC,CAAC,CAAC,EAAC,GACxF;QAAA;UAAAP,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACG;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACV,CACN,eAGDhF,OAAA,CAACd,GAAG;MAAC8E,EAAE,EAAE;QACPC,OAAO,EAAE,MAAM;QACfC,cAAc,EAAE,eAAe;QAC/BqD,EAAE,EAAE,CAAC;QACLI,UAAU,EAAE,MAAM;QAClBvD,CAAC,EAAE,CAAC;QACJC,YAAY,EAAE,CAAC;QACfC,WAAW,EAAE;MACf,CAAE;MAAAE,QAAA,gBACAxE,OAAA,CAACd,GAAG;QAAC8E,EAAE,EAAE;UAAE4D,IAAI,EAAE,CAAC;UAAEJ,SAAS,EAAE;QAAS,CAAE;QAAAhD,QAAA,EAAC;MAAS;QAAAK,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eAC1DhF,OAAA,CAACd,GAAG;QAAC8E,EAAE,EAAE;UAAEsD,KAAK,EAAE,OAAO;UAAEE,SAAS,EAAE;QAAS,CAAE;QAAAhD,QAAA,EAAC;MAAM;QAAAK,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eAC9DhF,OAAA,CAACd,GAAG;QAAC8E,EAAE,EAAE;UAAE4D,IAAI,EAAE,CAAC;UAAEJ,SAAS,EAAE;QAAS,CAAE;QAAAhD,QAAA,EAAC;MAAQ;QAAAK,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACtD,CAAC,eAENhF,OAAA,CAACd,GAAG;MAAC8E,EAAE,EAAE;QAAE4D,IAAI,EAAE;MAAE,CAAE;MAAApD,QAAA,EAClBnE,eAAe,IAAIA,eAAe,CAAC0C,OAAO,iBACzC/C,OAAA,CAACP,SAAS;QAAA+E,QAAA,EACPA,CAAC;UAAEqB,MAAM;UAAEyB;QAAM,CAAC,kBACjBtH,OAAA,CAACN,IAAI;UACH4H,KAAK,EAAEA,KAAM;UACbzB,MAAM,EAAEA,MAAO;UACfgC,QAAQ,EAAExH,eAAe,CAAC0C,OAAO,CAACC,MAAO;UACzC8E,SAAS,EAAE,EAAG;UACdC,WAAW,EAAE/B,SAAU;UACvBgC,gBAAgB,EAAE;QAAG;UAAAnD,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACtB;MACF;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACQ;IACZ;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAAC5E,EAAA,CAnYIH,WAAW;AAAAgI,EAAA,GAAXhI,WAAW;AAqYjB,eAAeA,WAAW;AAAC,IAAAgI,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}